<!DOCTYPE html>
  <html lang="en">
    <head>
      <meta charset="utf-8">
      <title>Exploring gleam through advent of code — ackurat.github.io</title>
      <meta name="description" content="">
      <meta name="author" content="Adam CL">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link href="/index.xml" rel="alternate" type="application/rss+xml" title="ackurat.github.io">
      <meta name="ROBOTS" content="INDEX, FOLLOW">
      <meta property="og:title" content="Exploring gleam through advent of code — ackurat.github.io">
      <meta property="og:description" content="">
      <meta property="og:type" content="article">
      <meta property="og:url" content="https://ackurat.github.io/exploring-gleam-through-advent-of-code/">
      <meta name="twitter:card" content="summary">
      <meta name="twitter:title" content="Exploring gleam through advent of code — ackurat.github.io">
      <meta name="twitter:description" content="">
      <meta itemprop="name" content="Exploring gleam through advent of code — ackurat.github.io">
      <meta itemprop="description" content="">
      
        <meta itemprop="datePublished" content="2024-11-11T06:00:00Z">
        <meta itemprop="dateModified" content="2024-11-11T06:00:00Z">
        <meta itemprop="wordCount" content="514">
        <meta itemprop="keywords" content="gleam,advent-of-code">
        <meta property="article:author" content="Adam CL">
        <meta property="article:section" content="Software">
        <meta property="article:tag" content="gleam"><meta property="article:tag" content="advent-of-code">
        <meta property="article:published_time" content="2024-11-11T06:00:00Z">
        <meta property="article:modified_time" content="2024-11-11T06:00:00Z">
      
      <link rel="canonical" href="https://ackurat.github.io/exploring-gleam-through-advent-of-code/">
      <link rel="stylesheet" href="/assets/app.css">
      <script>
        (function() {
          const storedTheme = localStorage.getItem('theme');
          const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
          const theme = storedTheme || systemTheme;

          document.documentElement.style.colorScheme = theme;
          document.documentElement.classList.add(theme);

          const storedContrast = localStorage.getItem('highContrast') === 'true';
          const systemContrast = window.matchMedia('(prefers-contrast: more)').matches ? 'hc' : '';
          const contrast = storedContrast || systemContrast;
          if (contrast) {
            document.documentElement.classList.add('hc');
          }
        })();
      </script>
      
        <script data-goatcounter="https://ackurat.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
      
    </head>
    <body class="bg-latte-crust dark:bg-macchiato-base hc:bg-white hc:dark:bg-black text-latte-text dark:text-macchiato-text hc:text-black hc:dark:text-white min-h-screen font-sans">
        <header class="flex justify-center py-4" id="top">
            <nav class="flex justify-between items-center gap-4 pb-6 px-2 text-lg font-bold tracking-wider w-full max-w-2xl">
                <a href="/">~/</a>
                <div class="flex flex-wrap gap-4">
                    <a href="/about/">About</a>
                    <a href="/archive/">Archive</a>
                    <a type="application/rss+xml" href="/index.xml" alt="RSS feed" aria-label="RSS feed">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-[1em] w-auto inline-block align-middle -mt-0.5" viewBox="0 0 24 24" aria-label="RSS icon with radio waves emanating from a dot in the lower left">
                        <!-- Icon from Logos free icons by Streamline - https://creativecommons.org/licenses/by/4.0/ -->
                            <g fill="currentColor" stroke="none" stroke-linejoin="round">
                                <path d="M1.5 19.5a3 3 0 1 0 6 0a3 3 0 1 0-6 0"></path>
                                <path d="M12.5 22.5c0-6.075-4.925-11-11-11v-3c7.732 0 14 6.268 14 14z" clip-rule="evenodd"></path>
                                <path d="M19.5 22.5c0-9.941-8.059-18-18-18v-3c11.598 0 21 9.402 21 21z" clip-rule="evenodd"></path>
                            </g>
                        </svg>
                    </a>
                    <button id="theme-toggle" class="cursor-pointer hover:opacity-70 transition-opacity" aria-label="Toggle theme">
                        <span id="theme-icon"></span>
                    </button>
                    <button id="contrast-toggle" class="cursor-pointer hover:opacity-70 transition-opacity" aria-label="Toggle high contrast">
                        <span id="contrast-icon"></span>
                    </button>
                </div>
            </nav>
        </header>
        <main class="w-full">
            
  
  <aside class="hidden lg:block fixed left-[calc(50%-624px)] w-64" style="top: calc(5rem + 6.5rem);">
    <nav class="sticky top-4">
      <ol class="list-none space-y-2 text-sm pl-0">
        <li class="ml-0">
            <a href="#top" alt="Scroll to top" aria-label="Scroll to top">
              <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" aria-label="Icon showing an arrow pointing upwards, enclosed in a circle">
                <!-- Icon from Material Symbols by Google - https://github.com/google/material-design-icons/blob/master/LICENSE -->
                <path fill="currentColor" d="M11 16h2v-4.2l1.6 1.6L16 12l-4-4l-4 4l1.4 1.4l1.6-1.6zm1 6q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22"></path>
              </svg>
            </a>
        </li>
        
          <li class="leading-relaxed ml-0">
            <a href="#Why-I-Chose-Gleam" data-toc-link="Why-I-Chose-Gleam" class="no-underline opacity-80 hover:opacity-100 hover:text-[rgb(30,102,245)] dark:hover:text-[rgb(138,173,244)] transition-opacity block py-1 [&[data-active='true']]:opacity-100 [&[data-active='true']]:font-bold">
              Why I Chose Gleam
            </a>
          </li>
        
          <li class="leading-relaxed ml-0">
            <a href="#First-Impressions" data-toc-link="First-Impressions" class="no-underline opacity-80 hover:opacity-100 hover:text-[rgb(30,102,245)] dark:hover:text-[rgb(138,173,244)] transition-opacity block py-1 [&[data-active='true']]:opacity-100 [&[data-active='true']]:font-bold">
              First Impressions
            </a>
          </li>
        
          <li class="leading-relaxed ml-3">
            <a href="#Missed-Functionality-1-list-access-by-index" data-toc-link="Missed-Functionality-1-list-access-by-index" class="no-underline opacity-80 hover:opacity-100 hover:text-[rgb(30,102,245)] dark:hover:text-[rgb(138,173,244)] transition-opacity block py-1 [&[data-active='true']]:opacity-100 [&[data-active='true']]:font-bold">
              Missed Functionality #1 - list access by index
            </a>
          </li>
        
      </ol>
    </nav>
  </aside>


  <div class="flex justify-center px-4">
  <div class="w-full max-w-2xl">
    
    <article class="text-l">
      <div class="flex flex-col mb-6">
        <span class="text-base">Nov 11, 2024</span>
        <h1 class="text-3xl">Exploring gleam through advent of code</h1>
        <div>
          <a class="text-base mr-2" href="/keywords/gleam">gleam</a><a class="text-base mr-2" href="/keywords/advent-of-code">advent-of-code</a>
        </div>
      </div>

      <html><head></head><body><p><a href="https://gleam.run">Gleam</a> is a statically typed functional programming language that gets compiled to either <a href="https://en.wikipedia.org/wiki/BEAM_(Erlang_virtual_machine">BEAM</a>) or JavaScript. Its syntax is more akin to <a href="https://rust-lang.org">Rust</a> than other BEAM languages such as <a href="https://elixir-lang.org">Elixir</a> and <a href="https://erlang.org">Erlang</a>.</p>
<pre class="athl athl-themes relative rounded-lg p-2 light dark" style="color: light-dark(#4c4f69, #cdd6f4); background-color: light-dark(#eff1f5, #1e1e2e);"><span class="absolute top-0 right-4 -translate-y-full rounded-t-lg px-2 text-base" style="background-color: light-dark(var(--color-latte-base), var(--color-mocha-base)); color: light-dark(var(--color-latte-text), var(--color-mocha-text));">gleam</span><code class="language-gleam block overflow-x-auto" translate="no" tabindex="0" role="code"><div class="line" data-line="1"><span style="color: light-dark(#8839ef, #cba6f7); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">pub</span> <span style="color: light-dark(#8839ef, #cba6f7); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">fn</span> <span style="color: light-dark(#1e66f5, #89b4fa); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">split</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">(</span><span style="color: light-dark(#e64553, #eba0ac); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">x</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">:</span> <span style="color: light-dark(#df8e1d, #f9e2af); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">String</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">,</span> <span style="color: light-dark(#209fb5, #74c7ec); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">on</span> <span style="color: light-dark(#e64553, #eba0ac); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">substring</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">:</span> <span style="color: light-dark(#df8e1d, #f9e2af); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">String</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">)</span> <span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">-&gt;</span> <span style="color: light-dark(#df8e1d, #f9e2af); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">List</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">(</span><span style="color: light-dark(#df8e1d, #f9e2af); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">String</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">)</span> <span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">{</span>
</div><div class="line" data-line="2">  <span style="color: light-dark(#8839ef, #cba6f7); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">case</span> <span style="color: light-dark(#e64553, #eba0ac); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">substring</span> <span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">{</span>
</div><div class="line" data-line="3">    <span style="color: light-dark(#40a02b, #a6e3a1); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">&quot;&quot;</span> <span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">-&gt;</span> <span style="color: light-dark(#1e66f5, #89b4fa); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">to_graphemes</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">(</span><span style="color: light-dark(#e64553, #eba0ac); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">x</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">)</span>
</div><div class="line" data-line="4">    <span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">_</span> <span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">-&gt;</span>
</div><div class="line" data-line="5">      <span style="color: light-dark(#e64553, #eba0ac); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">x</span>
</div><div class="line" data-line="6">      <span style="color: light-dark(#04a5e5, #89dceb); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">|&gt;</span> <span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">string_builder</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">.</span><span style="color: light-dark(#7287fd, #b4befe); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">from_string</span>
</div><div class="line" data-line="7">      <span style="color: light-dark(#04a5e5, #89dceb); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">|&gt;</span> <span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">string_builder</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">.</span><span style="color: light-dark(#1e66f5, #89b4fa); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">split</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">(</span><span style="color: light-dark(#209fb5, #74c7ec); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">on</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">:</span> <span style="color: light-dark(#e64553, #eba0ac); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">substring</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">)</span>
</div><div class="line" data-line="8">      <span style="color: light-dark(#04a5e5, #89dceb); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">|&gt;</span> <span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">list</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">.</span><span style="color: light-dark(#1e66f5, #89b4fa); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">map</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">(</span><span style="color: light-dark(#209fb5, #74c7ec); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">with</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">:</span> <span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">string_builder</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">.</span><span style="color: light-dark(#7287fd, #b4befe); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">to_string</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">)</span>
</div><div class="line" data-line="9">  <span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">}</span>
</div><div class="line" data-line="10"><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">}</span>
</div></code></pre>
<section id="Why-I-Chose-Gleam">
<h2><a href="#Why-I-Chose-Gleam">Why I Chose Gleam</a></h2>
<p>First and foremost, I wanted to try something new. Gleam ticked quite a few of the boxes of things I like in a language:</p>
<ul>
<li>
Static type system
</li>
<li>
Immutability
</li>
<li>
Compiled
</li>
<li>
Built-in tooling
</li>
<li>
Decent standard library
</li>
</ul>
<p>For the purpose of AoC, it’s mainly the type system, tooling and standard library I’m choosing Gleam. I might take on doing something more complicated (and distributed) afterwards.</p>
</section>
<section id="First-Impressions">
<h2><a href="#First-Impressions">First Impressions</a></h2>
<p>As I usually work in procedural languages, getting into the strictly functional paradigm has been the biggest hurdle. Don’t get me wrong - I often use the functional style functions of JS, but due to its mutability and dynamic typing, it’s far from Gleam. I’ve previously delved into Elixir, and while it is also functional it’s got the dynamic typing to make it less of a jump. After completing the first 8 days of AoC, I’m getting used to it and I see the light that is immutability. In the codebase I spend most time in at work, there’s plenty of functionality that modifies in-place, causing both confusion and bugs for developers who are new to the code.</p>
<section id="Missed-Functionality-1---list-access-by-index">
<h3><a href="#Missed-Functionality-1-list-access-by-index">Missed Functionality #1 - list access by index</a></h3>
<p>When it comes to AoC, it’s very common to work with arrays/lists, for instance in a matrix:</p>
<pre class="athl athl-themes relative rounded-lg p-2 dark light" style="color: light-dark(#4c4f69, #cdd6f4); background-color: light-dark(#eff1f5, #1e1e2e);"><span class="absolute top-0 right-4 -translate-y-full rounded-t-lg px-2 text-base" style="background-color: light-dark(var(--color-latte-base), var(--color-mocha-base)); color: light-dark(var(--color-latte-text), var(--color-mocha-text));">python</span><code class="language-python block overflow-x-auto" translate="no" tabindex="0" role="code"><div class="line" data-line="1"><span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">matrix</span> <span style="color: light-dark(#04a5e5, #89dceb); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">=</span> [[<span style="color: light-dark(#40a02b, #a6e3a1); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">&#39;a&#39;</span>, <span style="color: light-dark(#40a02b, #a6e3a1); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">&#39;b&#39;</span>], [<span style="color: light-dark(#40a02b, #a6e3a1); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">&#39;c&#39;</span>, <span style="color: light-dark(#40a02b, #a6e3a1); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">&#39;d&#39;</span>]]
</div><div class="line" data-line="2"><span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">matrix</span>[<span style="color: light-dark(#fe640b, #fab387); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">0</span>][<span style="color: light-dark(#fe640b, #fab387); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">0</span>] <span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);"># &#39;a&#39;</span>
</div></code></pre>
<p>Let’s say then that a task requires shifting rows by 1:</p>
<pre class="athl athl-themes relative rounded-lg p-2 dark light" style="color: light-dark(#4c4f69, #cdd6f4); background-color: light-dark(#eff1f5, #1e1e2e);"><span class="absolute top-0 right-4 -translate-y-full rounded-t-lg px-2 text-base" style="background-color: light-dark(var(--color-latte-base), var(--color-mocha-base)); color: light-dark(var(--color-latte-text), var(--color-mocha-text));">python</span><code class="language-python block overflow-x-auto" translate="no" tabindex="0" role="code"><div class="line" data-line="1"><span style="color: light-dark(#8839ef, #cba6f7); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">def</span> <span style="color: light-dark(#1e66f5, #89b4fa); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">shift_row_right</span>(<span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">matrix</span>, <span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">row_index</span>, <span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">n</span>):
</div><div class="line" data-line="2">    <span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">row</span> <span style="color: light-dark(#04a5e5, #89dceb); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">=</span> <span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">matrix</span>[<span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">row_index</span>]
</div><div class="line" data-line="3">    <span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">n</span> <span style="color: light-dark(#04a5e5, #89dceb); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">=</span> <span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">n</span> <span style="color: light-dark(#04a5e5, #89dceb); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">%</span> <span style="color: light-dark(#fe640b, #fab387); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">len</span>(<span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">row</span>)
</div><div class="line" data-line="4">    <span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">shifted_row</span> <span style="color: light-dark(#04a5e5, #89dceb); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">=</span> <span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">row</span>[<span style="color: light-dark(#04a5e5, #89dceb); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">-</span><span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">n</span>:] <span style="color: light-dark(#04a5e5, #89dceb); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">+</span> <span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">row</span>[:<span style="color: light-dark(#04a5e5, #89dceb); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">-</span><span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">n</span>]
</div><div class="line" data-line="5">    <span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">matrix</span>[<span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">row_index</span>] <span style="color: light-dark(#04a5e5, #89dceb); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">=</span> <span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">shifted_row</span>
</div><div class="line" data-line="6">    <span style="color: light-dark(#8839ef, #cba6f7); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">return</span> <span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">matrix</span>
</div><div class="line" data-line="7">
</div><div class="line" data-line="8"><span style="color: light-dark(#1e66f5, #89b4fa); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">shift_row_right</span>(<span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">matrix</span>, <span style="color: light-dark(#fe640b, #fab387); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">0</span>, <span style="color: light-dark(#fe640b, #fab387); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">1</span>) <span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);"># [[&#39;b&#39;, &#39;a&#39;], [&#39;c&#39;, &#39;d&#39;]]</span>
</div></code></pre>
<p>Performance aside, this is a very simple and neat way of accessing elements in a list. There’s no need to iterate over the rows. In Gleam, you can’t access lists by index. Instead, you have to iterate through the list until you’re on the right index. Pairing this with the immutability means that shifting rows as above is a bit more tedious. For AoC 2016 day 8, this was the solution I came up with for shifting rows with wrap around:</p>
<pre class="athl athl-themes relative rounded-lg p-2 light dark" style="color: light-dark(#4c4f69, #cdd6f4); background-color: light-dark(#eff1f5, #1e1e2e);"><span class="absolute top-0 right-4 -translate-y-full rounded-t-lg px-2 text-base" style="background-color: light-dark(var(--color-latte-base), var(--color-mocha-base)); color: light-dark(var(--color-latte-text), var(--color-mocha-text));">gleam</span><code class="language-gleam block overflow-x-auto" translate="no" tabindex="0" role="code"><div class="line" data-line="1"><span style="color: light-dark(#8839ef, #cba6f7); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">pub</span> <span style="color: light-dark(#8839ef, #cba6f7); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">fn</span> <span style="color: light-dark(#1e66f5, #89b4fa); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">shift_row_right</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">(</span>
</div><div class="line" data-line="2">  <span style="color: light-dark(#e64553, #eba0ac); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">matrix</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">:</span> <span style="color: light-dark(#df8e1d, #f9e2af); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">Matrix</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">(</span><span style="color: light-dark(#df8e1d, #f9e2af); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">value</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">)</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">,</span>
</div><div class="line" data-line="3">  <span style="color: light-dark(#e64553, #eba0ac); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">row</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">:</span> <span style="color: light-dark(#df8e1d, #f9e2af); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">Int</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">,</span>
</div><div class="line" data-line="4">  <span style="color: light-dark(#e64553, #eba0ac); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">shift</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">:</span> <span style="color: light-dark(#df8e1d, #f9e2af); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">Int</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">,</span>
</div><div class="line" data-line="5"><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">)</span> <span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">-&gt;</span> <span style="color: light-dark(#df8e1d, #f9e2af); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">Matrix</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">(</span><span style="color: light-dark(#df8e1d, #f9e2af); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">value</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">)</span> <span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">{</span>
</div><div class="line" data-line="6">  <span style="color: light-dark(#df8e1d, #f9e2af); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">Matrix</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">(</span>
</div><div class="line" data-line="7">    <span style="color: light-dark(#7287fd, #b4befe); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">cells</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">:</span> <span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">list</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">.</span><span style="color: light-dark(#1e66f5, #89b4fa); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">index_map</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">(</span><span style="color: light-dark(#e64553, #eba0ac); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">matrix</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">.</span><span style="color: light-dark(#7287fd, #b4befe); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">cells</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">,</span> <span style="color: light-dark(#8839ef, #cba6f7); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">fn</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">(</span><span style="color: light-dark(#e64553, #eba0ac); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">current_row</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">,</span> <span style="color: light-dark(#e64553, #eba0ac); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">row_index</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">)</span> <span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">{</span>
</div><div class="line" data-line="8">      <span style="color: light-dark(#8839ef, #cba6f7); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">case</span> <span style="color: light-dark(#e64553, #eba0ac); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">row_index</span> <span style="color: light-dark(#04a5e5, #89dceb); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">==</span> <span style="color: light-dark(#e64553, #eba0ac); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">row</span> <span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">{</span>
</div><div class="line" data-line="9">        <span style="color: light-dark(#fe640b, #fab387); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">True</span> <span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">-&gt;</span> <span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">{</span>
</div><div class="line" data-line="10">          <span style="color: light-dark(#e64553, #eba0ac); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">current_row</span>
</div><div class="line" data-line="11">          <span style="color: light-dark(#04a5e5, #89dceb); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">|&gt;</span> <span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">list</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">.</span><span style="color: light-dark(#1e66f5, #89b4fa); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">split</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">(</span><span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">list</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">.</span><span style="color: light-dark(#1e66f5, #89b4fa); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">length</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">(</span><span style="color: light-dark(#e64553, #eba0ac); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">current_row</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">)</span> <span style="color: light-dark(#04a5e5, #89dceb); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">-</span> <span style="color: light-dark(#e64553, #eba0ac); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">shift</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">)</span>
</div><div class="line" data-line="12">          <span style="color: light-dark(#04a5e5, #89dceb); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">|&gt;</span> <span style="color: light-dark(#8839ef, #cba6f7); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">fn</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">(</span><span style="color: light-dark(#e64553, #eba0ac); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">split</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">)</span> <span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">{</span> <span style="color: light-dark(#4c4f69, #cdd6f4); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">list</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">.</span><span style="color: light-dark(#1e66f5, #89b4fa); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">append</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">(</span><span style="color: light-dark(#e64553, #eba0ac); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">split</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">.</span><span style="color: light-dark(#04a5e5, #89dceb); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">1</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">,</span> <span style="color: light-dark(#e64553, #eba0ac); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">split</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">.</span><span style="color: light-dark(#04a5e5, #89dceb); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">0</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">)</span> <span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">}</span>
</div><div class="line" data-line="13">        <span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">}</span>
</div><div class="line" data-line="14">        <span style="color: light-dark(#fe640b, #fab387); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">False</span> <span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">-&gt;</span> <span style="color: light-dark(#e64553, #eba0ac); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">current_row</span>
</div><div class="line" data-line="15">      <span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">}</span>
</div><div class="line" data-line="16">    <span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">}</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">)</span><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">,</span>
</div><div class="line" data-line="17">  <span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">)</span>
</div><div class="line" data-line="18"><span style="color: light-dark(#7c7f93, #9399b2); font-weight: light-dark(normal, normal); text-decoration: light-dark(none, none);">}</span>
</div></code></pre>
<p>We first have to iterate through all the rows, and in case of being on the wrong row we just return it as is. In case of being on the right row, we then need to construct a new row by iterating over the row, first to split it and then over the first part of the new list (<code class="language-plaintext" translate="no">split.1
</code>) in the <code class="language-plaintext" translate="no">list.append
</code> function.</p>
</section>
</section>
</body></html>
    </article>

    <div class="-mx-4 my-2 flex h-1 w-screen rounded-full sm:mx-0 sm:w-full bg-linear-to-r dark:from-footer-dark-1 from-footer-light-1 dark:via-footer-dark-2 via-footer-light-2 dark:to-footer-dark-3 to-footer-light-3"></div>
  <footer class="italic">
    
      <div class="flex justify-between">
        
          <a href="/once-again-rewriting-the-site">
            Previous
          </a>
        
        
          <a href="/setting-up-a-site-with-zine">
            Next
          </a>
        
      </div>
    
  </footer>
  
  </div>
</div>

  <script>
  (function() {
    let lastHash = location.hash;

    function updateTOC(sectionId) {
      document.querySelectorAll('[data-toc-link]').forEach(function(link) {
        link.setAttribute('data-active', link.dataset.tocLink === sectionId);
      });
    }

    document.addEventListener('scroll', function() {
      const sections = document.querySelectorAll('h1[id], h2[id], h3[id], h4[id], h5[id], h6[id], section[id]');
      let currentSection = null;

      sections.forEach(function(section) {
        if (window.scrollY >= section.offsetTop - 100) {
          currentSection = section;
        }
      });

      // If at bottom of page, use the last section
      if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 10) {
        currentSection = sections[sections.length - 1];
      }

      if (currentSection && currentSection.id) {
        const newHash = '#' + currentSection.id;
        if (lastHash !== newHash) {
          history.replaceState(null, '', location.origin + location.pathname + newHash);
          lastHash = newHash;
          updateTOC(currentSection.id);
        }
      }
    });

    if (location.hash) {
      updateTOC(decodeURIComponent(location.hash.substring(1)));
    }
  })();
</script>

        </main>
        <script>
            const themeToggle = document.getElementById('theme-toggle');
            const themeIcon = document.getElementById('theme-icon');
            const contrastToggle = document.getElementById('contrast-toggle');
            const contrastIcon = document.getElementById('contrast-icon');
            const html = document.documentElement;

            function updateThemeIcon() {
              const currentTheme = html.style.colorScheme ||
                  (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
              themeIcon.textContent = currentTheme === 'dark' ? '☼' : '☾';
            }

            function updateContrastIcon() {
              const isHighContrast = html.classList.contains('hc');
              contrastIcon.textContent = isHighContrast ? '◑' : '◐';
            }

            updateThemeIcon();
            updateContrastIcon();

            themeToggle.addEventListener('click', () => {
              const currentTheme = html.style.colorScheme ||
                  (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
              const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
              html.style.colorScheme = newTheme;
              html.classList.remove('light', 'dark');
              html.classList.add(newTheme);
              localStorage.setItem('theme', newTheme);
              updateThemeIcon();
            });

            contrastToggle.addEventListener('click', () => {
              const isHighContrast = html.classList.contains('hc');
              if (isHighContrast) {
                html.classList.remove('hc');
                localStorage.setItem('highContrast', 'false');
              } else {
                html.classList.add('hc');
                localStorage.setItem('highContrast', 'true');
              }
              updateContrastIcon();
            });

        </script>


    </body>
  </html>