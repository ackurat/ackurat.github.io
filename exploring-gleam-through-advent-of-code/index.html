<!DOCTYPE html>
  <html lang="en">
    <head>
      <meta charset="utf-8">
      <title>Exploring gleam through advent of code — ackurat.github.io</title>
      <meta name="description" content="">
      <meta name="author" content="Adam CL">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link href="/index.xml" rel="alternate" type="application/rss+xml" title="ackurat.github.io">
      <meta name="ROBOTS" content="INDEX, FOLLOW">
      <meta property="og:title" content="Exploring gleam through advent of code — ackurat.github.io">
      <meta property="og:description" content="">
      <meta property="og:type" content="article">
      <meta property="og:url" content="https://ackurat.github.io/exploring-gleam-through-advent-of-code/">
      <meta name="twitter:card" content="summary">
      <meta name="twitter:title" content="Exploring gleam through advent of code — ackurat.github.io">
      <meta name="twitter:description" content="">
      <meta itemprop="name" content="Exploring gleam through advent of code — ackurat.github.io">
      <meta itemprop="description" content="">
      
        <meta itemprop="datePublished" content="2024-11-11T06:00:00Z">
        <meta itemprop="dateModified" content="2024-11-11T06:00:00Z">
        <meta itemprop="wordCount" content="513">
        <meta itemprop="keywords" content="gleam,advent-of-code">
        <meta property="article:author" content="Adam CL">
        <meta property="article:section" content="Software">
        <meta property="article:tag" content="gleam"><meta property="article:tag" content="advent-of-code">
        <meta property="article:published_time" content="2024-11-11T06:00:00Z">
        <meta property="article:modified_time" content="2024-11-11T06:00:00Z">
      
      <link rel="canonical" href="https://ackurat.github.io/exploring-gleam-through-advent-of-code/">
      <link rel="stylesheet" href="/assets/app.css">
    </head>
    <body>
      <div class="container mx-auto px-4">
        <header class="flex justify-center py-4">
          <nav class="flex flex-wrap justify-center gap-4 pb-6 px-2 text-lg font-bold tracking-wider">
            <a href="/">Home</a>
            <a href="/about/">About</a>
            <a href="/archive/">Archive</a>
            <a href="/keywords/">Tags</a>
            <a href="/reads/">Reads</a>
            <a href="/photos/">Photos</a>
            <a type="application/rss+xml" href="/index.xml">RSS</a>
          </nav>
        </header>
        <main class="flex justify-center">
          <div class="w-full md:w-1/2">
            
  <div class="flex flex-col">
    <span class="text-base">Nov 11, 2024</span>
    <span class="text-3xl">Exploring gleam through advent of code</span>
    <div>
      <a class="text-base mr-2" href="/keywords/gleam" class="text-base">gleam</a><a class="text-base mr-2" href="/keywords/advent-of-code" class="text-base">advent-of-code</a>
    </div>
  </div>
  <article class="text-xl">
    
<p><a href="https://gleam.run">Gleam</a> is a statically typed functional programming language that gets compiled to either <a href="https://en.wikipedia.org/wiki/BEAM_(Erlang_virtual_machine">BEAM</a>) or JavaScript. Its syntax is more akin to <a href="https://rust-lang.org">Rust</a> than other BEAM languages such as <a href="https://elixir-lang.org">Elixir</a> and <a href="https://erlang.org">Erlang</a>.</p>
<pre><code class="language-gleam">pub fn split(x: String, on substring: String) -&gt; List(String) {
  case substring {
    "" -&gt; to_graphemes(x)
    _ -&gt;
      x
      |&gt; string_builder.from_string
      |&gt; string_builder.split(on: substring)
      |&gt; list.map(with: string_builder.to_string)
  }
}
</code></pre>
<section id="Why-I-Chose-Gleam">
<h2><a href="#Why-I-Chose-Gleam">Why I Chose Gleam</a></h2>
<p>First and foremost, I wanted to try something new. Gleam ticked quite a few of the boxes of things I like in a language:</p>
<ul>
<li>
Static type system
</li>
<li>
Immutability
</li>
<li>
Compiled
</li>
<li>
Built-in tooling
</li>
<li>
Decent standard library
</li>
</ul>
<p>For the purpose of AoC, it’s mainly the type system, tooling and standard library I’m choosing Gleam. I might take on doing something more complicated (and distributed) afterwards.</p>
</section>
<section id="First-Impressions">
<h2><a href="#First-Impressions">First Impressions</a></h2>
<p>As I usually work in procedural languages, getting into the strictly functional paradigm has been the biggest hurdle. Don’t get me wrong - I often use the functional style functions of JS, but due to its mutability and dynamic typing, it’s far from Gleam. I’ve previously delved into Elixir, and while it is also functional it’s got the dynamic typing to make it less of a jump. After completing the first 8 days of AoC, I’m getting used to it and I see the light that is immutability. In the codebase I spend most time in at work, there’s plenty of functionality that modifies in-place, causing both confusion and bugs for developers who are new to the code.</p>
<section id="Missed-Functionality-1---list-access-by-index">
<h3><a href="#Missed-Functionality-#1---list-access-by-index">Missed Functionality #1 - list access by index</a></h3>
<p>When it comes to AoC, it’s very common to work with arrays/lists, for instance in a matrix:</p>
<pre><code class="language-python">matrix = [['a', 'b'], ['c', 'd']]
matrix[0][0] # 'a'
</code></pre>
<p>Let’s say then that a task requires shifting rows by 1:</p>
<pre><code class="language-python">def shift_row_right(matrix, row_index, n):
    row = matrix[row_index]
    n = n % len(row)
    shifted_row = row[-n:] + row[:-n]
    matrix[row_index] = shifted_row
    return matrix

shift_row_right(matrix, 0, 1) # [['b', 'a'], ['c', 'd']]
</code></pre>
<p>Performance aside, this is a very simple and neat way of accessing elements in a list. There’s no need to iterate over the rows. In Gleam, you can’t access lists by index. Instead, you have to iterate through the list until you’re on the right index. Pairing this with the immutability means that shifting rows as above is a bit more tedious. For AoC 2016 day 8, this was the solution I came up with for shifting rows with wrap around:</p>
<pre><code class="language-gleam">pub fn shift_row_right(
  matrix: Matrix(value),
  row: Int,
  shift: Int,
) -&gt; Matrix(value) {
  Matrix(
    cells: list.index_map(matrix.cells, fn(current_row, row_index) {
      case row_index == row {
        True -&gt; {
          current_row
          |&gt; list.split(list.length(current_row) - shift)
          |&gt; fn(split) { list.append(split.1, split.0) }
        }
        False -&gt; current_row
      }
    }),
  )
}
</code></pre>
<p>We first have to iterate through all the rows, and in case of being on the wrong row we just return it as is. In case of being on the right row, we then need to construct a new row by iterating over the row, first to split it and then over the first part of the new list (<code>split.1</code>) in the <code>list.append</code> function.</p>
</section>
</section>

  </article>
  <hr class="my-4">
  <footer>
    
    <div class="flex justify-between">
      
        <a href="/understanding-postgresql-buffers">
          Previous
        </a>
      
      
        <a href="/setting-up-a-site-with-zine">
          Next
        </a>
      
    </div>
  
  </footer>
  
          </div>
        </main>
      </div>
    </body>
  </html>