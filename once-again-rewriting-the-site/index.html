<!DOCTYPE html>
  <html lang="en">
    <head>
      <meta charset="utf-8">
      <title>Once again rewriting the site — ackurat.github.io</title>
      <meta name="description" content="I&#39;m rewriting the site in Elixir, with NimblePublisher and LiveView templates as a base.">
      <meta name="author" content="Adam CL">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link href="/index.xml" rel="alternate" type="application/rss+xml" title="ackurat.github.io">
      <meta name="ROBOTS" content="INDEX, FOLLOW">
      <meta property="og:title" content="Once again rewriting the site — ackurat.github.io">
      <meta property="og:description" content="I&#39;m rewriting the site in Elixir, with NimblePublisher and LiveView templates as a base.">
      <meta property="og:type" content="article">
      <meta property="og:url" content="https://ackurat.github.io/once-again-rewriting-the-site/">
      <meta name="twitter:card" content="summary">
      <meta name="twitter:title" content="Once again rewriting the site — ackurat.github.io">
      <meta name="twitter:description" content="I&#39;m rewriting the site in Elixir, with NimblePublisher and LiveView templates as a base.">
      <meta itemprop="name" content="Once again rewriting the site — ackurat.github.io">
      <meta itemprop="description" content="I&#39;m rewriting the site in Elixir, with NimblePublisher and LiveView templates as a base.">
      
        <meta itemprop="datePublished" content="2025-02-08T06:00:00Z">
        <meta itemprop="dateModified" content="2025-02-08T06:00:00Z">
        <meta itemprop="wordCount" content="509">
        <meta itemprop="keywords" content="elixir,zine">
        <meta property="article:author" content="Adam CL">
        <meta property="article:section" content="Software">
        <meta property="article:tag" content="elixir"><meta property="article:tag" content="zine">
        <meta property="article:published_time" content="2025-02-08T06:00:00Z">
        <meta property="article:modified_time" content="2025-02-08T06:00:00Z">
      
      <link rel="canonical" href="https://ackurat.github.io/once-again-rewriting-the-site/">
      <link rel="stylesheet" href="/assets/app.css">
      <script>
        (function() {
        const theme = localStorage.getItem('theme') ||
            (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        document.documentElement.setAttribute('data-theme', theme);
        })();
      </script>
      
        <script data-goatcounter="https://ackurat.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
      
    </head>
    <body>
        <header class="flex justify-center py-4">
            <nav class="flex justify-between items-center gap-4 pb-6 px-2 text-lg font-bold tracking-wider w-full max-w-2xl">
                <a href="/">~/</a>
                <div class="flex flex-wrap gap-4">
                    <a href="/about/">About</a>
                    <a href="/archive/">Archive</a>
                    <a type="application/rss+xml" href="/index.xml">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-[1em] w-auto inline-block align-middle -mt-0.5" viewBox="0 0 24 24">
                        <!-- Icon from Logos free icons by Streamline - https://creativecommons.org/licenses/by/4.0/ -->
                            <g fill="currentColor" stroke="none" stroke-linejoin="round">
                                <path d="M1.5 19.5a3 3 0 1 0 6 0a3 3 0 1 0-6 0"></path>
                                <path d="M12.5 22.5c0-6.075-4.925-11-11-11v-3c7.732 0 14 6.268 14 14z" clip-rule="evenodd"></path>
                                <path d="M19.5 22.5c0-9.941-8.059-18-18-18v-3c11.598 0 21 9.402 21 21z" clip-rule="evenodd"></path>
                            </g>
                        </svg>
                    </a>
                    <button id="theme-toggle" class="cursor-pointer hover:opacity-70 transition-opacity" aria-label="Toggle theme">
                        <span id="theme-icon"></span>
                    </button>
                </div>
            </nav>
        </header>
        <main class="w-full">
            
  
  <aside class="hidden lg:block fixed left-[calc(50%-624px)] w-64" style="top: calc(5rem + 6.5rem);">
    <nav class="sticky top-4">
      <ol class="list-none space-y-2 text-sm pl-0">
        
          <li class="leading-relaxed ml-0">
            <a href="#Upcoming-changes" data-toc-link="Upcoming-changes" class="no-underline opacity-80 hover:opacity-100 hover:text-[rgb(30,102,245)] dark:hover:text-[rgb(138,173,244)] transition-opacity block py-1 [&[data-active='true']]:opacity-100 [&[data-active='true']]:font-bold">
              Upcoming changes
            </a>
          </li>
        
          <li class="leading-relaxed ml-3">
            <a href="#Djot-support" data-toc-link="Djot-support" class="no-underline opacity-80 hover:opacity-100 hover:text-[rgb(30,102,245)] dark:hover:text-[rgb(138,173,244)] transition-opacity block py-1 [&[data-active='true']]:opacity-100 [&[data-active='true']]:font-bold">
              Djot support
            </a>
          </li>
        
          <li class="leading-relaxed ml-3">
            <a href="#Less-hand-written-CSS" data-toc-link="Less-hand-written-CSS" class="no-underline opacity-80 hover:opacity-100 hover:text-[rgb(30,102,245)] dark:hover:text-[rgb(138,173,244)] transition-opacity block py-1 [&[data-active='true']]:opacity-100 [&[data-active='true']]:font-bold">
              Less hand-written CSS
            </a>
          </li>
        
          <li class="leading-relaxed ml-3">
            <a href="#Typography-improvements" data-toc-link="Typography-improvements" class="no-underline opacity-80 hover:opacity-100 hover:text-[rgb(30,102,245)] dark:hover:text-[rgb(138,173,244)] transition-opacity block py-1 [&[data-active='true']]:opacity-100 [&[data-active='true']]:font-bold">
              Typography improvements
            </a>
          </li>
        
      </ol>
    </nav>
  </aside>


  <div class="flex justify-center px-4">
  <div class="w-full max-w-2xl">
    
    <article class="text-l">
      <div class="flex flex-col mb-6">
        <span class="text-base">Feb 8, 2025</span>
        <h1 class="text-3xl">Once again rewriting the site</h1>
        <div>
          <a class="text-base mr-2" href="/keywords/elixir">elixir</a><a class="text-base mr-2" href="/keywords/zine">zine</a>
        </div>
      </div>

      
<p>Once again I’m rewriting the site. I never got around to finishing my <a href="https://zine-ssg.io">Zine</a> implementation, partly because I didn’t have time to invest into learning Zig. I’ll soon start a new job where I’ll use <a href="https://elixir-lang.org">Elixir</a> and <a href="https://erlang.org">Erlang</a> as my main languages. I haven’t used Erlang much before, but Elixir has been a lurking favourite, and with my experiments with <a href="https://gleam.run">Gleam</a> I found renewed interest in it.</p>
<p>The site uses <a href="https://github.com/dashbitco/nimble_publisher">NimblePublisher</a> and <a href="https://github.com/phoenixframework/phoenix_live_view">LiveView</a> <code>HEEx</code> templates. The basis for the site is <a href="https://fly.io/phoenix-files/crafting-your-own-static-site-generator-using-phoenix/">Jason Stiebe’s tutorial</a>, and after I had implemented a rudimentary version I forked <a href="https://jorin.me/">Jorin’s website</a> and started rebuilding it to my liking. Kudos to both these for saving me time! Unlike Jorin, I don’t have a desire to create my site generator from scratch, but I’ll happily spend time refactoring and tinkering.</p>
<section id="Upcoming-changes">
<h2><a href="#Upcoming-changes">Upcoming changes</a></h2>
<p>Inspired by <a href="https://www.jonashietala.se/blog/2024/07/09/microfeatures_in_my_blog/">Jonas Hietala’s microfeatures</a>, I have some features I want to implement. Just like he states, microfeatures are fun and a way to learn. For instance, I’ve already implemented headings with automatic linking. It was pretty straight forward - reimplement the parsing of headings to add markdown links, and add a postprocessor to add the anchor ID to the headings:</p>
<pre><code class="makeup elixir"><span class="c1"># parser.ex</span><span class="w">

</span><span class="kd">defp</span><span class="w"> </span><span class="nf">replace_heading</span><span class="p" data-group-id="3059208028-1">(</span><span class="n">line</span><span class="p" data-group-id="3059208028-1">)</span><span class="w"> </span><span class="k" data-group-id="3059208028-2">do</span><span class="w">
  </span><span class="k">if</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">starts_with?</span><span class="p" data-group-id="3059208028-3">(</span><span class="n">line</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;## &quot;</span><span class="p" data-group-id="3059208028-3">)</span><span class="w"> </span><span class="k" data-group-id="3059208028-4">do</span><span class="w">
    </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">replace</span><span class="p" data-group-id="3059208028-5">(</span><span class="n">line</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;## &quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p" data-group-id="3059208028-5">)</span><span class="w">
    </span><span class="n">slug</span><span class="w"> </span><span class="o">=</span><span class="w">
      </span><span class="n">title</span><span class="w">
      </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">downcase</span><span class="p" data-group-id="3059208028-6">(</span><span class="p" data-group-id="3059208028-6">)</span><span class="w">
      </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">replace</span><span class="p" data-group-id="3059208028-7">(</span><span class="sr">~r/[^a-z]+/</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="p" data-group-id="3059208028-7">)</span><span class="w">
      </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">trim</span><span class="p" data-group-id="3059208028-8">(</span><span class="s">&quot;-&quot;</span><span class="p" data-group-id="3059208028-8">)</span><span class="w">

    </span><span class="s">&quot;## [</span><span class="si" data-group-id="3059208028-9">#{</span><span class="n">title</span><span class="si" data-group-id="3059208028-9">}</span><span class="s">](#</span><span class="si" data-group-id="3059208028-10">#{</span><span class="n">slug</span><span class="si" data-group-id="3059208028-10">}</span><span class="s">)&quot;</span><span class="w">
  </span><span class="k" data-group-id="3059208028-4">else</span><span class="w">
    </span><span class="n">line</span><span class="w">
  </span><span class="k" data-group-id="3059208028-4">end</span><span class="w">
</span><span class="k" data-group-id="3059208028-2">end</span><span class="w">

</span><span class="c1"># [processor.ex](#processorex)</span><span class="w">

</span><span class="kd">def</span><span class="w"> </span><span class="nf">process</span><span class="p" data-group-id="3059208028-11">(</span><span class="p" data-group-id="3059208028-12">{</span><span class="s">&quot;h2&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3059208028-13">[</span><span class="p" data-group-id="3059208028-13">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3059208028-14">[</span><span class="n">text</span><span class="p" data-group-id="3059208028-14">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3059208028-15">%{</span><span class="p" data-group-id="3059208028-15">}</span><span class="p" data-group-id="3059208028-12">}</span><span class="p" data-group-id="3059208028-11">)</span><span class="w"> </span><span class="k" data-group-id="3059208028-16">do</span><span class="w">
  </span><span class="k">case</span><span class="w"> </span><span class="n">text</span><span class="w"> </span><span class="k" data-group-id="3059208028-17">do</span><span class="w">
    </span><span class="p" data-group-id="3059208028-18">{</span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3059208028-19">[</span><span class="p" data-group-id="3059208028-20">{</span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="n">anchor_id</span><span class="p" data-group-id="3059208028-20">}</span><span class="p" data-group-id="3059208028-19">]</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p" data-group-id="3059208028-18">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="3059208028-21">{</span><span class="s">&quot;h2&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3059208028-22">[</span><span class="p" data-group-id="3059208028-23">{</span><span class="s">&quot;id&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">anchor_id</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">trim</span><span class="p" data-group-id="3059208028-24">(</span><span class="s">&quot;#&quot;</span><span class="p" data-group-id="3059208028-24">)</span><span class="p" data-group-id="3059208028-23">}</span><span class="p" data-group-id="3059208028-22">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3059208028-25">[</span><span class="n">text</span><span class="p" data-group-id="3059208028-25">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3059208028-26">%{</span><span class="p" data-group-id="3059208028-26">}</span><span class="p" data-group-id="3059208028-21">}</span><span class="w">
    </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="3059208028-27">{</span><span class="s">&quot;h2&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3059208028-28">[</span><span class="p" data-group-id="3059208028-28">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3059208028-29">[</span><span class="n">text</span><span class="p" data-group-id="3059208028-29">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3059208028-30">%{</span><span class="p" data-group-id="3059208028-30">}</span><span class="p" data-group-id="3059208028-27">}</span><span class="w">
  </span><span class="k" data-group-id="3059208028-17">end</span><span class="w">
</span><span class="k" data-group-id="3059208028-16">end</span><span class="w">
</span></code></pre>
<section id="Djot-support">
<h3><a href="#Djot-support">Djot support</a></h3>
<p>One microfeature I really like in Jonas’ blog is syntax highlighting in inline code. I could solve this by either writing the inline code as HTML:</p>
<pre><code>This is some markdown with inline Elixir code: &lt;code class="makeup elixir"&gt;def process(value), do: value&lt;/code&gt;
</code></pre>
<p>Unfortunately, the markdown parser used by NimblePublisher, <a href="https://github.com/pragdave/earmark">Earmark</a> doesn’t support inline HTML. It’s probably solvable by using a postprocessor, but that feels like a tedious rabbit hole. Instead, I want to take the same <a href="https://www.jonashietala.se/blog/2024/02/02/blogging_in_djot_instead_of_markdown/">path as Jonas</a> and use <a href="https://www.djot.net/">Djot</a> to write content. Djot supports adding <a href="https://htmlpreview.github.io/?https://github.com/jgm/djot/blob/master/doc/syntax.html#inline-attributes">inline attributes</a> which could be used like this:</p>
<pre><code>This is some markdown with inline Elixir code: `def process(value), do: value`{.makeup .elixir}
</code></pre>
<p>There are more features of Djot I could use, for instance footnotes.</p>
</section>
<section id="Less-hand-written-CSS">
<h3><a href="#Less-hand-written-CSS">Less hand-written CSS</a></h3>
<p>I’m using <a href="https://tailwindcss.com/">TailwindCSS</a> to lessen the need of writing CSS, but since I use Earmark to produce the HTML of the post you’re reading right now, it’s not simple to use Tailwind for styling within the generated HTML. Instead, I’ve resorted to hand-writing CSS. I’m trying to minimize it and if I switch to Djot, I’ll see if it’s easier to have a post processing step to add Tailwind classes to the generated HTML.</p>
</section>
<section id="Typography-improvements">
<h3><a href="#Typography-improvements">Typography improvements</a></h3>
<p>The styling and typography is very basic right now. I like it basic, but I still think there is room for improvement. For instance, the header of this section is not very well separated stylistically.</p>
</section>
</section>

    </article>

    <div class="-mx-4 my-2 flex h-1 w-[100vw] footer-gradient rounded-full sm:mx-0 sm:w-full"></div>
  <footer class="italic">
    
      <div class="flex justify-between">
        
          <a href="/using-djot-for-content">
            Previous
          </a>
        
        
          <a href="/exploring-gleam-through-advent-of-code">
            Next
          </a>
        
      </div>
    
  </footer>
  
  </div>
</div>

  <script>
  (function() {
    let lastHash = location.hash;

    function updateTOC(sectionId) {
      document.querySelectorAll('[data-toc-link]').forEach(function(link) {
        link.setAttribute('data-active', link.dataset.tocLink === sectionId);
      });
    }

    document.addEventListener('scroll', function() {
      const sections = document.querySelectorAll('h1[id], h2[id], h3[id], h4[id], h5[id], h6[id], section[id]');
      let currentSection = null;

      sections.forEach(function(section) {
        if (window.scrollY >= section.offsetTop - 100) {
          currentSection = section;
        }
      });

      // If at bottom of page, use the last section
      if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 10) {
        currentSection = sections[sections.length - 1];
      }

      if (currentSection && currentSection.id) {
        const newHash = '#' + currentSection.id;
        if (lastHash !== newHash) {
          history.replaceState(null, '', location.origin + location.pathname + newHash);
          lastHash = newHash;
          updateTOC(currentSection.id);
        }
      }
    });

    if (location.hash) {
      updateTOC(decodeURIComponent(location.hash.substring(1)));
    }
  })();
</script>

        </main>
        <script>
            const themeToggle = document.getElementById('theme-toggle');
            const themeIcon = document.getElementById('theme-icon');
            const html = document.documentElement;

            function updateIcon() {
              const currentTheme = html.getAttribute('data-theme');
              themeIcon.textContent = currentTheme === 'dark' ? '☼' : '☾';
            }

            updateIcon();

            themeToggle.addEventListener('click', () => {
              const currentTheme = html.getAttribute('data-theme');
              const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
              html.setAttribute('data-theme', newTheme);
              localStorage.setItem('theme', newTheme);
              updateIcon();
            });
        </script>
    </body>
  </html>